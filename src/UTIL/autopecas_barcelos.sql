-- MySQL Script generated by MySQL Workbench
-- Thu Nov 11 14:29:11 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema autopecas_barcelos
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema autopecas_barcelos
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `autopecas_barcelos` ;
USE `autopecas_barcelos` ;

-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`contato`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`contato` (
  `cod_contato` INT(11) NOT NULL AUTO_INCREMENT,
  `telefone_contato` VARCHAR(45) NULL DEFAULT NULL,
  `celular_contato` VARCHAR(45) NULL DEFAULT NULL,
  `email_contato` VARCHAR(120) NULL DEFAULT NULL,
  PRIMARY KEY (`cod_contato`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`endereco`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`endereco` (
  `cod_endereco` INT(11) NOT NULL AUTO_INCREMENT,
  `rua_endereco` VARCHAR(120) NOT NULL,
  `numero_endereco` INT(11) NOT NULL,
  `bairro_endereco` VARCHAR(120) NOT NULL,
  `cidade_endereco` VARCHAR(120) NOT NULL,
  `estado_endereco` VARCHAR(2) NOT NULL,
  `cep_endereco` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cod_endereco`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`cliente` (
  `cod_cliente` INT(11) NOT NULL AUTO_INCREMENT,
  `nome_cliente` VARCHAR(255) NOT NULL,
  `tipo_cliente` INT(11) NOT NULL,
  `clientecontato_cod_contato` INT(11) NOT NULL,
  `endereco_cod_endereco` INT(11) NOT NULL,
  PRIMARY KEY (`cod_cliente`),
  INDEX `fk_cliente_clientecontato1_idx` (`clientecontato_cod_contato`),
  INDEX `fk_cliente_endereco1_idx` (`endereco_cod_endereco`),
  CONSTRAINT `fk_cliente_clientecontato1`
    FOREIGN KEY (`clientecontato_cod_contato`)
    REFERENCES `autopecas_barcelos`.`contato` (`cod_contato`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_cliente_endereco1`
    FOREIGN KEY (`endereco_cod_endereco`)
    REFERENCES `autopecas_barcelos`.`endereco` (`cod_endereco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`clientefisica`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`clientefisica` (
  `cpf` VARCHAR(45) NOT NULL,
  `rg` VARCHAR(45) NULL DEFAULT NULL,
  `cliente_cod_cliente` INT(11) NOT NULL,
  UNIQUE INDEX (`cpf`),
  UNIQUE INDEX (`rg`),
  PRIMARY KEY (`cpf`),
  INDEX `fk_clientefisica_cliente1_idx` (`cliente_cod_cliente`),
  CONSTRAINT `fk_clientefisica_cliente1`
    FOREIGN KEY (`cliente_cod_cliente`)
    REFERENCES `autopecas_barcelos`.`cliente` (`cod_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`clientejuridica`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`clientejuridica` (
  `cnpj` VARCHAR(45) NOT NULL,
  `inscricao_estadual` VARCHAR(45) NOT NULL,
  `cliente_cod_cliente` INT(11) NOT NULL,
  UNIQUE INDEX (`cnpj`),
  UNIQUE INDEX (`inscricao_estadual`),
  PRIMARY KEY (`cnpj`),
  INDEX `fk_clientejuridica_cliente1_idx` (`cliente_cod_cliente`),
  CONSTRAINT `fk_clientejuridica_cliente1`
    FOREIGN KEY (`cliente_cod_cliente`)
    REFERENCES `autopecas_barcelos`.`cliente` (`cod_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`Fornecedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`Fornecedor` (
  `idFornecedor` INT NOT NULL AUTO_INCREMENT,
  `razao_social` VARCHAR(255) NOT NULL,
  `cnpj` VARCHAR(45) NOT NULL,
  `inscricao_estadual` VARCHAR(45) NOT NULL,
  `endereco_cod_endereco` INT(11) NOT NULL,
  `contato_cod_contato` INT(11) NOT NULL,
  PRIMARY KEY (`idFornecedor`),
  UNIQUE INDEX `cnpj_UNIQUE` (`cnpj`),
  UNIQUE INDEX `inscricao_estadual_UNIQUE` (`inscricao_estadual`),
  INDEX `fk_Fornecedor_endereco1_idx` (`endereco_cod_endereco`),
  INDEX `fk_Fornecedor_contato1_idx` (`contato_cod_contato`),
  CONSTRAINT `fk_Fornecedor_endereco1`
    FOREIGN KEY (`endereco_cod_endereco`)
    REFERENCES `autopecas_barcelos`.`endereco` (`cod_endereco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Fornecedor_contato1`
    FOREIGN KEY (`contato_cod_contato`)
    REFERENCES `autopecas_barcelos`.`contato` (`cod_contato`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`marca`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`marca` (
  `cod_marca` INT NOT NULL AUTO_INCREMENT,
  `nome_marca` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`cod_marca`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`categoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`categoria` (
  `cod_categoria` INT NOT NULL AUTO_INCREMENT,
  `nome_categoria` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`cod_categoria`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`Produto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`Produto` (
  `cod_Produto` INT NOT NULL AUTO_INCREMENT,
  `descricao_produto` VARCHAR(155) NOT NULL,
  `FK_marca` INT NOT NULL,
  `FK_categoria` INT NOT NULL,
  `quantidade` INT(11) NOT NULL,
  `quantidade_minima` INT(11) NOT NULL,
  `codigo_barras` VARCHAR(15) NOT NULL,
  `valor_custo` VARCHAR(15) NOT NULL,
  `valor_venda` VARCHAR(15) NOT NULL,
  PRIMARY KEY (`cod_Produto`),
  INDEX `fk_Produto_marca1_idx` (`FK_marca`),
  INDEX `fk_Produto_categoria1_idx` (`FK_categoria`),
  CONSTRAINT `fk_Produto_marca1`
    FOREIGN KEY (`FK_marca`)
    REFERENCES `autopecas_barcelos`.`marca` (`cod_marca`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Produto_categoria1`
    FOREIGN KEY (`FK_categoria`)
    REFERENCES `autopecas_barcelos`.`categoria` (`cod_categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `autopecas_barcelos`.`Produto_has_Fornecedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`Produto_has_Fornecedor` (
  `cod_ProdFornecedor` INT(11) NOT NULL AUTO_INCREMENT,
  `Produto_cod_Produto` INT NOT NULL,
  `Fornecedor_idFornecedor` INT NOT NULL,
  INDEX `fk_Produto_has_Fornecedor_Fornecedor1_idx` (`Fornecedor_idFornecedor`),
  INDEX `fk_Produto_has_Fornecedor_Produto1_idx` (`Produto_cod_Produto`),
  PRIMARY KEY (`cod_ProdFornecedor`),
  CONSTRAINT `fk_Produto_has_Fornecedor_Produto1`
    FOREIGN KEY (`Produto_cod_Produto`)
    REFERENCES `autopecas_barcelos`.`Produto` (`cod_Produto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Produto_has_Fornecedor_Fornecedor1`
    FOREIGN KEY (`Fornecedor_idFornecedor`)
    REFERENCES `autopecas_barcelos`.`Fornecedor` (`idFornecedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `autopecas_barcelos`.`Funcionario` (
  `idFuncionario` INT NOT NULL AUTO_INCREMENT,
  `nome_funcionario` VARCHAR(255) NOT NULL,
  `cpf_funcionario` VARCHAR(45) NOT NULL,
  `rg_funcionario` VARCHAR(45) NOT NULL,
  `senha` VARCHAR(45) NOT NULL,
  `data_admissao` DATETIME NOT NULL,
  `status` INT NOT NULL,
  `nivel_acesso` INT NOT NULL,
  `contato_cod_contato` INT(11) NOT NULL,
  `endereco_cod_endereco` INT(11) NOT NULL,
  PRIMARY KEY (`idFuncionario`),
  UNIQUE INDEX `cpf_UNIQUE` (`cpf_funcionario`),
  UNIQUE INDEX `rg_funcionario_UNIQUE` (`rg_funcionario`),
  INDEX `fk_Funcionario_contato1_idx` (`contato_cod_contato`),
  INDEX `fk_Funcionario_endereco1_idx` (`endereco_cod_endereco`),
  CONSTRAINT `fk_Funcionario_contato1`
    FOREIGN KEY (`contato_cod_contato`)
    REFERENCES `autopecas_barcelos`.`contato` (`cod_contato`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Funcionario_endereco1`
    FOREIGN KEY (`endereco_cod_endereco`)
    REFERENCES `autopecas_barcelos`.`endereco` (`cod_endereco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


alter table clientejuridica add foreign key (Cliente_cod_cliente) references cliente(cod_cliente) on DELETE CASCADE;
alter table clientefisica add foreign key (Cliente_cod_cliente) references cliente(cod_cliente) on DELETE CASCADE;